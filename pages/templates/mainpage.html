{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href='{% static "/css/mainpage.css" %}'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> <!-- css for the search icon (fa fa-search) -->
    <!-- <script src = '{% static "/js/main.js" %}'></script>  js file  -->

    <title>Restock - Main page</title>
</head>



<div class = "header">
		<div class = "inner_header">
      <div class = "logo_container">
        <a href="{% url 'home' %}"><img class = "logo_img" src = '{% static "/imgs/logo3.png" %}'></img></a>
      </div>

      <div class = "search_container">
        <form id = "searchbar" class = "search_form">
            <input type="text" class = "searchtext" name="product" placeholder="Search for Products"><button type="submit" value="Search!"><i class="fa fa-search" id = "search_button"></i> Search</button>
        </form>
      </div>

			<nav>
			  <ul class = "navigation"> <!--  Header to use on other pages -->
				  <li>
            {% if request.session.email != '' %}
                <a href="{% url 'signout' %}">Sign Out</a>
            {% else %}
                <a href="{% url 'login' %}"> Login </a>
            {% endif %}
					</li>
          <li>
            {% if request.session.email != '' %}
            <a href="{% url 'notification' %}">Notification</a>
            {% endif %}
          </li>
				</ul>
			</nav>
		</div>

</div>
<body>
  <form>
    <div class = "header_container">
    {% if request.session.email != '' %}
        <h1 style="color:#008080; text-align:right; padding-left: 1.75rem; position:absolute">Welcome: {{request.session.email}}</h1>
    {% endif %}
         <h1 style = "margin-top: 1rem;">Products <button class= "notifbutton" type="submit" value="submit">Notify<i style = "margin-left: 7.5px;" class="fa fa-clock-o"></i></button>
         </h1>
    </div>
    <div class = "wrapper">
      {% for product in all_enteries %}
    <div class="box" style = "margin-top: 1rem;" value = {{product.UUID}}>
      <input type="checkbox" class = "notifcheck" id="product" name="id" value={{product.UUID}}>
      <div class = "box_text" onclick = "displayInfo('{{product.UUID.strip}}','{{product.product.strip}}', '{{product.BestBuy_price}}');return false;">
        {{product.product}}
      </div>
      <div class = "testing-val" style = "display: none;"> <!-- to be used for displaying later? -->
        {{product.UUID}}
      </div>

    </div>
    <!-- {% for bproduct in bb_product %}
    {% if product.UUID == bproduct.BestBuy_UUID.UUID %}
    <div class = "checker">
      {{product.UUID}} is the one.
      Some useful data here:
      {{bproduct.BestBuy_price}}
      {{bproduct.BestBuy_SKU}}
      {{bproduct.BestBuy_Status}}
      {{bproduct.BestBuy_Ratings}}
      {{bproduct.BestBuy_Review}}
      {{bproduct.BestBuy_ModelNumber}}
      <a href={{product.BestBuy_URL}}>Link</a>
      {{product.BestBuy_UUID.UUID}}
    </div>
    {% endif %}
    {% endfor %} -->
      {% endfor %}

  </form>
  </div>

  <div class = "fakepopup_data" id = "fakepopup_data" style = "display: none;">
      <div class = "popup_data_info" id = "fakepopup_data_main" value = "">

      </div>

      <div class = "exit_popup" onclick = "hideDisplayInfo();return false;">
        EXIT
      </div>
  </div>
  {% comment %}
    <!-- {% for x in all_enteries %}
    <h1>{{x.UUID}}</h1>
    {% for product in bb_product %}
      {% if x.UUID == product.BestBuy_UUID.UUID %}
	    <h1 style = "margin-top: 1rem" onclick = "javascript:alert('event has been triggered');">BestBuy
			<img src='{% static "/imgs/bestbuy.png" %}'>
      </h1>
    <table class = "table-header" border="1">
      <thead>
        <tr id = "bestbuy_table">
            <th>BestBuy Product Name</th>
            <th>BestBuy Price</th>
            <th>BestBuy SKU</th>
            <th>BestBuy Product Status</th>
            <th>BestBuy Ratings</th>
            <th>BestBuy Number of Reviews</th>
            <th>BestBuy ModelNumber</th>
            <th>BestBuy URL</th>
            <th>BestBuy UUID</th>
        </tr>
      </thead>
        <tr class = "table-header" id = "bestbuy_table">
            <td class = "td-product-header" onclick = "javascript:alert('A Pop up of product info would show.');">{{product.BestBuy_UUID.product}}</td>
            <td>{{product.BestBuy_price}}</td>
            <td>{{product.BestBuy_SKU}}</td>
            <td>{{product.BestBuy_Status}}</td>
            <td>{{product.BestBuy_Ratings}}</td>
            <td>{{product.BestBuy_Review}}</td>
            <td>{{product.BestBuy_ModelNumber}}</td>
            <td><a href={{product.BestBuy_URL}}>Link</a></td>
            <td>{{product.BestBuy_UUID.UUID}}</td>
        </tr>
        </table>
          {% endif %}
        {% endfor %}
        {% for product in mc_product %}
          {% if x.UUID == product.MicroCenter_UUID.UUID %}
        <table class = "table-header" border="1">
          <thead>
            <tr>
                <th>MicroCenter Product Name</th>
                <th>MicroCenter Price</th>
                <th>MicroCenter SKU</th>
                <th>MicroCenter ModelNumber</th>
                <th>MicroCenter URL</th>
                <th>MicroCenter UUID</th>
            </tr>
          </thead>
            <tr>
              <td>{{product.MicroCenter_UUID.product}}</td>
              <td>{{product.MicroCenter_Price}}</td>
              <td>{{product.MicroCenter_SKU}}</td>
              <td>{{product.MicroCenter_ModelNumber}}</td>
              <td><a href={{product.MicroCenter_URL}}>Link</a></td>
              <td>{{product.MicroCenter_UUID.UUID}}</td>
          </tr>
        </table>
          {% endif %}
        {% endfor %}
    {% for product in gs_product %}
      {% if x.UUID == product.Gamestop_UUID.UUID %}
        <table class = "table-header" border="1">
        <thead>
          <tr>
            <th>Gamestop Product Name</th>
            <th>Gamestop Price</th>
            <th>GameStop SKU</th>
            <th>Gamestop Product Status</th>
            <th>Gamestop Ratings</th>
            <th>Gamestop Number of Reviews</th>
            <th>Gamestop URL</th>
            <th>Gamestop UUID</th>
          </tr>
        </thead>
        <tr>

          <td>{{product.Gamestop_UUID.product}}</td>
          <td>{{product.Gamestop_price}}</td>
          <td>{{product.Gamestop_SKU}}</td>
          <td>{{product.Gamestop_Status}}</td>
          <td>{{product.Gamestop_Ratings}}</td>
          <td>{{product.Gamestop_Reviews}}</td>
          <td><a href={{product.Gamestop_URL}}>Link</a></td>
          <td>{{product.Gamestop_UUID.UUID}}</td>
        </tr>
      </table>
      {% endif %}
    {% endfor %}
    {% for product in bh_product %}
      {% if x.UUID == product.BH_UUID.UUID %}
        <table class = "table-header" border="1">
        <thead>
          <tr>
            <th>BH Product Name</th>
            <th>BH Price</th>
            <th>BH SKU</th>
            <th>BH Product Status</th>
            <th>BH Ratings</th>
            <th>BH Number of Reviews</th>
            <th>BH URL</th>
            <th>BH UUID</th>
          </tr>
        </thead>
          <tr>
            <td>{{product.BH_UUID.product}}</td>
            <td>{{product.BH_price}}</td>
            <td>{{product.BH_SKU}}</td>
            <td>{{product.BH_Status}}</td>
            <td>{{product.BH_Ratings}}</td>
            <td>{{product.BH_Reviews}}</td>
            <td><a href={{product.BH_URL}}>Link</a></td>
            <td>{{product.BH_UUID.UUID}}</td>
        </tr>
    </table>
    {% endif %}
  {% endfor %}
  {% for product in ad_product %}
    {% if x.UUID == product.AD_UUID.UUID %}
      <table class = "table-header" border="1">
      <thead>
        <tr>
          <th>AD Product Name</th>
          <th>AD Price</th>
          <th>AD SKU</th>
          <th>AD Product Status</th>
          <th>AD Ratings</th>
          <th>AD Number of Reviews</th>
          <th>AD URL</th>
          <th>AD UUID</th>
        </tr>
      </thead>
        <tr>
            <td>{{product.AD_UUID.product}}</td>
            <td>{{product.AD_price}}</td>
            <td>{{product.AD_SKU}}</td>
            <td>{{product.AD_Status}}</td>
            <td>{{product.AD_Ratings}}</td>
            <td>{{product.AD_Reviews}}</td>
            <td><a href={{product.AD_URL}}>Link</a></td>
            <td>{{product.AD_UUID.UUID}}</td>
        </tr>
    </table>
    {% endif %}
  {% endfor %}
  {% for product in amzn_product %}
    {% if x.UUID == product.Amazon_UUID.UUID %}
      <table class = "table-header" border="1">
      <thead>
        <tr>
          <th>Amazon Product Name</th>
          <th>Amazon Price</th>
          <th>Amazon SKU</th>
          <th>Amazon Product Status</th>
          <th>Amazon Rating</th>
          <th>Amazon Number of Review</th>
          <th>Amazon URL</th>
          <th>Amazon UUID</th>
        </tr>
      </thead>
      <tr>
          <td>{{product.Amazon_UUID.product}}</td>
          <td>{{product.Amazon_price}}</td>
          <td>{{product.Amazon_SKU}}</td>
          <td>{{product.Amazon_Status}}</td>
          <td>{{product.Amazon_Ratings}}</td>
          <td>{{product.Amazon_Reviews}}</td>
          <td><a href={{product.Amazon_URL}}>Link<a href=</td>
          <td>{{product.Amazon_UUID.UUID}}</td>
      </tr>
  </table>
  {% endif %}
{% endfor %}
{% endfor %} -->{% endcomment %}
</body>
<script type = "text/javascript">
/* */
// var bbuy_table = document.getElementById("bestbuy_table"); old test code. Ignore.
// var popup_data = document.getElementById("fakepopup_data");
var bestbuyArray = []; //data array to store products to compare.
var bharray = [];
var mcArray = [];
var adArray = [];
var gsArray = [];
var amznArray = [];

var checker = document.getElementById("fakepopup_data_main");
{% for bproduct in bb_product %} //push bestbuy data to the array
  bestbuyArray.push('{{bproduct.BestBuy_UUID.UUID.strip}}, {{bproduct.BestBuy_UUID.product}}, {{bproduct.BestBuy_price}}, {{bproduct.BestBuy_Status}}, {{bproduct.BestBuy_Ratings}}, {{bproduct.BestBuy_Review}}, {{bproduct.BestBuy_URL}}')
{% endfor %}

{% for bhproduct in bh_product %} //push BH data to the array
  bharray.push('{{bhproduct.BH_UUID.UUID.strip}}, {{bhproduct.BH_price}}, {{bhproduct.BH_Status}}, {{bhproduct.BH_Ratings}}, {{bhproduct.BH_Review}}, {{bhproduct.BH_URL}}')
{% endfor %}

{% for product in mc_product %} //push mc data to the array
  mcArray.push('{{product.MicroCenter_UUID.UUID.strip}}, {{product.MicroCenter_UUID.product}}, {{product.MicroCenter_Price}}, {{product.MicroCenter_ModelNumber}}, {{product.MicroCenter_URL}}')
{% endfor %}

{% for product in amzn_product %} //push amzn data to the array
  amznArray.push('{{product.Amazon_UUID.UUID.strip}}, {{product.Amazon_UUID.product}}, {{product.Amazon_price}}, {{product.Amazon_SKU}}, {{product.Amazon_Status}}, {{product.Amazon_Ratings}}, {{product.Amazon_Reviews}}, {{product.Amazon_URL}}')
{% endfor %}

{% for product in gs_product %} //push gs data to the array
  gsArray.push('{{product.Gamestop_UUID.UUID.strip}}, {{product.Gamestop_UUID.product}}, {{product.Gamestop_price}}, {{product.Gamestop_SKU}}, {{product.Gamestop_Status}}, {{product.Gamestop_Ratings}}, {{product.Gamestop_Reviews}}, {{product.Gamestop_URL}}')
{% endfor %}

{% for product in ad_product %}//push ad data to the array
  adArray.push('{{product.AD_UUID.UUID.strip}}, {{product.AD_UUID.product}}, {{product.AD_price}}, {{product.AD_SKU}}, {{product.AD_Status}}, {{product.AD_Ratings}}, {{product.AD_Reviews}}, {{product.AD_URL}}')
{% endfor %}

//note that console.log is a print function for javascript.

function displayInfo(product_id, productName, bestbuyData){
  console.log(product_id)
  document.getElementById("fakepopup_data").style.display = "block";
  document.getElementById("fakepopup_data_main").value = product_id;
  console.log("New value: " + document.getElementById("fakepopup_data_main").value);
  //document.getElementById("fakepopup_data_main").innerHTML = productName;
  checkArrayHelper(bestbuyArray, product_id, "bestbuy");
  checkArrayHelper(bharray, product_id, "bh");
  checkArrayHelper(mcArray, product_id, "mc");
  checkArrayHelper(amznArray, product_id, "amzn");
  checkArrayHelper(gsArray, product_id, "gamestop");
  checkArrayHelper(adArray, product_id, "ad");

  console.log("info has been displayed.")
}

  function checkArrayHelper(arrayToCheck, product_id, brand){ //helper function to print data - arguments taken: array and brand (what brand it is)
    var firstCompare = false;
    for(var i = 0; i < arrayToCheck.length; i++){ //loop through a given array
      console.log(arrayToCheck[i]);
      var compareUUID = arrayToCheck[i].split(","); //split data to grab just UUID.
      console.log(compareUUID[0]);
      if(product_id == compareUUID[0]){
        if(firstCompare == false && brand == "bestbuy"){ //if statements to check brand name and if it's the first comparison of the brand (to be modified/cleaned up later)
          firstCompare = true;
          document.getElementById("fakepopup_data_main").innerHTML += "<table class = 'table-header' border='1'> \
      <thead> \
        <tr id = 'bestbuy_table'> \
            <th>BestBuy Product Name</th> \
            <th>BestBuy Price</th> \
            <th>BestBuy Product Status</th> \
            <th>BestBuy Ratings</th> \
            <th>BestBuy Number of Reviews</th> \
            <th>BestBuy URL</th> \
            <th>BestBuy UUID</th> \
        </tr> \
      </thead> \
        <tr> \
          <tr class = 'table-header' id = 'bestbuy_table'> \
            <td>"+compareUUID[1]+"</td> \
            <td>"+compareUUID[2]+"</td> \
            <td>"+compareUUID[3]+"</td> \
            <td>"+compareUUID[4]+"</td> \
            <td>"+compareUUID[5]+"</td> \
            <td><a href="+compareUUID[6]+">Link</a></td> \
            <td>"+compareUUID[0]+"</td> \
        </tr> \
        </table>";
          document.getElementById("fakepopup_data_main").innerHTML += "<h1> This is bestbuy data: </h1><br>"; //header for each brand, when we find our first match - display the brand since product is there (but only once)
        }
        if(firstCompare == false && brand == "bh"){
          firstCompare = true;
          document.getElementById("fakepopup_data_main").innerHTML += "<h1>This is BH data: </h1><br>"; //header for each brand, when we find our first match - display the brand since product is there (but only once)
        }
        if(firstCompare == false && brand == "mc"){
          firstCompare = true;
          document.getElementById("fakepopup_data_main").innerHTML += "<h1>This is MC data: </h1><br>"; //header for each brand, when we find our first match - display the brand since product is there (but only once)
        }
        if(firstCompare == false && brand == "amzn"){
          firstCompare = true;
          document.getElementById("fakepopup_data_main").innerHTML += "<h1>This is Amazon data: </h1><br>"; //header for each brand, when we find our first match - display the brand since product is there (but only once)
        }
        if(firstCompare == false && brand == "gamestop"){
          firstCompare = true;
          document.getElementById("fakepopup_data_main").innerHTML += "<h1>This is Gamestop data: </h1><br>"; //header for each brand, when we find our first match - display the brand since product is there (but only once)
        }
        if(firstCompare == false && brand == "ad"){
          firstCompare = true;
          document.getElementById("fakepopup_data_main").innerHTML += "<h1>This is AD data: </h1><br>"; //header for each brand, when we find our first match - display the brand since product is there (but only once)
        }
        document.getElementById("fakepopup_data_main").innerHTML += compareUUID;
        document.getElementById("fakepopup_data_main").innerHTML += "<br>";
    }
  }
  //dataArray.forEach(element => console.log(element));
//  console.log(dataArray);
//  console.log("revealingData");
}


function hideDisplayInfo(){
  document.getElementById("fakepopup_data").style.display = "none";
  //console.log("InnerHTML: " + checker.innerHTML);
  checker.innerHTML = ""; //empty the popup data container
  console.log("Clearing values...");
  //console.log("hiding....");
}





</script>

</html>
